<!-- data-transloco helps to load translations file before asking for it. It throws missing translation key-->
<div class="table-view" slot="{{'empty' | transloco}}">
  <biit-table #table *ngIf="columns.length"
    [columns]="columns"
    [defaultPageSize]="10"
    [data]="data"
    [pageSizes]="pageSizes"
    (onUpdate)="onTableUpdate($event)"
    [loading]="loading"
    selectable sortable
  >
    <button biit-icon icon="plus"
            title="{{'add' | transloco}}"
            (click)="onAdd()"
    ></button>
    <button biit-icon icon="minus"
            title="{{'delete' | transloco}}"
            (click)="onDelete(table.getSelectedRows(), false)"
            [disabled]="!table.getSelectedRows().length"
    ></button>
    <button biit-icon icon="edit"
            title="{{'edit' | transloco}}"
            (click)="onEdit(table.getSelectedRows())"
            [disabled]="table.getSelectedRows().length !== 1"
    ></button>
    <button biit-icon icon="linkage"
            title="{{'assign' | transloco}}"
            (click)="onAssignAppRoles(table.getSelectedRows())"
            [disabled]="table.getSelectedRows().length !== 1"
    ></button>
    <button biit-icon icon="user_group"
            title="{{'userGroups.users' | transloco}}"
            (click)="onAssignUsers(table.getSelectedRows())"
            [disabled]="table.getSelectedRows().length !== 1"
    ></button>
  </biit-table>
</div>

<biit-user-group-form *ngIf="target"
                      [userGroup]="target"
                      (onClosed)="this.target = null"
                      (onSaved)="onSaved($event)"
>
</biit-user-group-form>

<biit-popup *ngIf="confirm === 'DELETE'"
            dark-bg no-header
            slot="{{'empty' | transloco}}"
>
  <div class="vertical">
    <div>{{'confirm_delete' | transloco}}</div>
    <div class="flex-grow horizontal buttons-row">
      <button biit-button secondary (click)="confirm = null">{{'cancel' | transloco}}</button>
      <button biit-button primary (click)="onDelete(selected, true)">{{'delete' | transloco}}</button>
    </div>
  </div>
</biit-popup>

<biit-popup *ngIf="assignAppRoles"
            [title]="('userGroups.assign_roles' | transloco)"
            (onClosed)="assignAppRoles = null"
            dark-bg
            sixty-view
            closable
>
  <biit-user-group-role-list [userGroup]="assignAppRoles"></biit-user-group-role-list>
</biit-popup>

<biit-popup *ngIf="assignUsers"
            [title]="('userGroups.assign_users' | transloco)"
            (onClosed)="assignUsers = null"
            dark-bg
            sixty-view
            closable
>
  <biit-user-group-user-list [userGroup]="assignUsers"
  ></biit-user-group-user-list>
</biit-popup>
