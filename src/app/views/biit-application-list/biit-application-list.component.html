<ng-container *transloco="let t">
  <div class="table-view">
    <biit-datatable id="application-table" #table
                    [columns]="columns"
                    [data]="applications"
                    [pageSize]="pageSize"
                    [pageSizeList]="pageSizes"
                    [loading]="loading"
                    selectable
    >
      <ng-template #actions>
        <button id="button-plus" biit-icon icon="plus" *ngIf="Permission.APPLICATIONS.CREATE | hasPermission"
                [title]="t('t.add')"
                (click)="onAdd()"
        ></button>
        <button id="button-minus" biit-icon icon="minus" *ngIf="Permission.APPLICATIONS.DELETE | hasPermission"
                [title]="t('t.delete')"
                (click)="onDelete(table.selectedRows, false)"
                [disabled]="!table.selectedRows.length"
        ></button>
        <button id="button-edit" biit-icon icon="edit" *ngIf="Permission.APPLICATIONS.EDIT | hasPermission"
                [title]="t('t.edit')"
                (click)="onEdit(table.selectedRows)"
                [disabled]="table.selectedRows.length !== 1"
        ></button>
        <button id="button-linkage" biit-icon icon="linkage" *ngIf="Permission.APPLICATIONS.PERMISSIONS | hasPermission"
                [title]="t('t.assign')"
                (click)="onAssign(table.selectedRows)"
                [disabled]="table.selectedRows.length !== 1"
        ></button>
      </ng-template>
    </biit-datatable>
  </div>

  <biit-popup id="confirmation-delete-popup" *ngIf="confirm === 'DELETE'"
              dark-bg no-header
  >
    <div class="vertical">
      <div>{{t('t.confirm_delete')}}</div>
      <div class="flex-grow horizontal buttons-row">
        <button id="confirm-cancel-button" biit-button secondary (click)="confirm = null">{{t('t.cancel')}}</button>
        <button id="confirm-delete-button" biit-button primary (click)="onDelete(selected, true)">{{t('t.delete')}}</button>
      </div>
    </div>

  </biit-popup>

  <biit-application-form *ngIf="popup"
                         [application]="target"
                         [type]="popup"
                         (onClosed)="this.target = null; this.popup = null;"
                         (onSaved)="onSaved()"
  ></biit-application-form>

  <biit-popup id="application-role-popup" *ngIf="application" [title]="application.id + ' ' +  t('t.roles')" (onClosed)="application = null" sixty-view closable>
    <biit-application-roles-list
      [application]="application"
      style="width: 100%"
    ></biit-application-roles-list>
  </biit-popup>
</ng-container>
